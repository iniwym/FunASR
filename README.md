# FunASR 项目文档

## 目录
- [简介](#简介)
- [环境依赖](#环境依赖)
- [快速开始](#快速开始)
  - [初始化项目](#初始化项目)
  - [使用 Shell 脚本操作](#使用-shell-脚本操作)
  - [自定义配置](#自定义配置)
- [配置文件说明](#配置文件说明)
- [注意事项](#注意事项)
- [联系我们](#联系我们)

## 简介

本项目基于 [FunASR](https://github.com/modelscope/FunASR) 实现的一个简单的Java Demo，是一款用于语音处理的自动化工具。它支持视频转音频、启动/关闭 Funasr 服务、音频转文字等功能，旨在简化语音处理流程，提高工作效率。

## 环境依赖

确保您的系统满足以下要求：

- **操作系统**：MacOS
- **Java 运行环境**：JRE 8 或以上版本
- **Docker 容器环境**：用于运行 Funasr 服务容器
- **Maven 构建工具**：用于构建 Java 项目
- **FFmpeg 工具**：用于处理音频文件
- **其他依赖项**：
  - 阿里云 Funasr SDK 镜像: `registry.cn-hangzhou.aliyuncs.com/funasr_repo/funasr:funasr-runtime-sdk-cpu-0.4.6`

### 安装步骤

1. **安装 Docker**：根据官方文档安装 Docker。
2. **安装 JRE**：下载并安装最新版本的 JRE。
3. **安装 Maven**：通过包管理器或官方网站安装 Maven。
4. **安装 FFmpeg**：通过包管理器或官方网站安装 FFmpeg。

## 快速开始

### 初始化项目

1. 克隆项目仓库：

```bash
git clone https://github.com/iniwym/FunASR.git 
cd FunASR
```

### 使用 Shell 脚本操作

进入项目的根目录后，您可以使用 `sh scripts/run_ini.sh` 来进行交互式操作。以下是各个选项的功能描述：

#### 功能菜单

- **0. 退出程序**：结束当前会话。
- **1. 视频转音频**：将指定路径下的 MP4 文件批量转换为 MP3 格式。
  - 输入参数：输入目录、输出目录
- **2. 启动 Funasr 服务**：在新的终端窗口中启动 Funasr 服务容器，包含镜像下载、启动和查看日志等步骤。
- **3. 音频转文字**：调用 Funasr Java 应用程序将音频文件转换为文本，并打开输出文件夹查看结果。
  - 输入参数：输入目录
- **4. 关闭 Funasr 服务**：停止正在运行的 Funasr 服务容器。

### 自定义配置

根据实际需求调整脚本中的参数设置，例如输入输出路径等。具体配置项可以在 `scripts/` 和 `src/` 目录中找到。

## 配置文件说明

- **`paramMapping.properties`**：用于映射参数，具体配置项包括但不限于：
  - `srvIp`
  - `srvPort`
  - `strChunkSize`
  - `chunkInterval`
  - `sendChunkSize`
  - `hotwords`

- **`user_info.json`**：用户信息配置文件，包含与飞书相关的配置项。
  - `larkKey`：飞书机器人 Key，用于集成飞书通知。

## 注意事项

- 在执行任何命令之前，请确保所有路径正确无误。
- 对于首次使用者，建议先熟悉各个子命令的具体用法。
- 如果遇到问题或有任何疑问，欢迎随时查阅官方文档或联系技术支持团队获取帮助。

### 常见问题及解决方案

- **问题**：无法启动 Funasr 服务。
  - **解决方法**：检查 Docker 是否正常运行，查看日志具体信息。
- **问题**：音频转文字失败。
  - **解决方法**：确保输入的音频文件格式正确，检查 Funasr 服务是否正常运行。

## 联系我们

如果有任何改进建议或者遇到的问题，也欢迎您反馈给我们。可以通过以下方式联系我们：

- GitHub Issues

---

希望这份文档能帮助您更好地理解和使用 FunASR 工具！感谢您的支持与反馈。
